<!DOCTYPE html>
<html lang='en'>

<head>
    <meta charset='utf-8'>
    <title>Shell test</title>
    <script type='text/javascript' src='lib/jsxLoader.min.js'></script>
    <script type='text/javascript' src='lib/react.development.js'></script>
    <script type='text/javascript' src='lib/react-dom.development.js'></script>
    <script type='text/javascript' src='lib/react-router-dom.js'></script>
    <script>
        Gorilla = {}
    </script>
    <script src="components/general.js" type="text/babel"></script>
</head>

<body>
    <div id='react-root'>
    </div>

    <script type='text/babel'>
        function Music() {
            React.useEffect(() => music.current.play(), [])
            const music = React.useRef({})

            const [volume, setVolume] = React.useState(1)
            music.current.volume = volume

            return <div>
                <audio ref={music} loop src='components/positive-funny-background-music-for-video-games.mp3'></audio>
                <Gorilla.AudioControl onVolume={setVolume} />
            </div>
        }

        function Home() {
            const history = ReactRouterDOM.useHistory()
            return <div><button onClick={() => history.push('music')}>nav</button></div>
        }

        function Page2() {
            const { HashRouter, Switch, Route, Link } = ReactRouterDOM

            return <div style={{ height: "100%", width: "100%" }}>
                <HashRouter>
                    <Switch>
                        <Route exact path="/">
                            <Home />
                        </Route>
                        <Route exact path="/music">
                            <Music />
                        </Route>
                    </Switch>
                </HashRouter>
            </div>
        }

        function Page() {
            const [play, setPlay] = React.useState(false)

            const music = play ? <Music /> : '' 
            
            return <div>
                <button onClick={() => setPlay(true)}>play</button>
                {music}
            </div>
        }

        ReactDOM.render(<Page2 />, document.querySelector('#react-root'))
    </script>
</body>

</html>
