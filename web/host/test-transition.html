<!DOCTYPE html>
<html>

<head>
    <title>Gorilla</title>
    <meta name='viewport' content='width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
    <meta name='HandheldFriendly' content='true'>

    <link rel='icon' href='/favicon.svg' />
</head>

<body>
    <script type='module'>
        import { html, render, useState } from '/public/lib/preact-3.1.0.standalone.module.js'
        import loadCss from '/public/load-css.js'
        loadCss('/public/style.css')
        loadCss('/public/font/komikatext_regular_macroman/stylesheet.css')
        import Shell from '/public/components/shell/shell.js'
        import Transition from '/components/host/transition.js'
        import AudioControl from '/public/components/audio/audio-control.js'

        const distribution = {
            "text": "Which one below is not mentioned in fairy tales of the Mid-Autumn Festival?",
            "answers": [
                { "id": "A", "text": "Changâ€™e, the goddess of the moon", "count": 25 },
                { "id": "B", "text": "Pied magpie", "count": 2, "correct": true },
                { "id": "C", "text": "Osmanthus tree", "count": 1 },
                { "id": "D", "text": "Jade Rabbit", "count": 0 }
            ],
            totalQuestions: 1
        }

        const avatars = Array.from('ğŸ¶ğŸ±ğŸ­ğŸ¹ğŸ°ğŸ¦ŠğŸ»ğŸ¼ğŸ¨ğŸ¯ğŸ¦ğŸ®ğŸ·ğŸ¸ğŸµğŸ²ğŸ™ğŸ¦‹ğŸğŸ¦€ğŸ”ğŸ§ğŸ¦†ğŸ¦…ğŸ¦‰ğŸ¦‡ğŸºğŸ´ğŸ¦„ğŸğŸ›ğŸŒğŸœğŸ¢ğŸğŸ¦ğŸ ğŸ¬ğŸ³ğŸŠğŸ¦ğŸ¤ğŸ¦‚ğŸ—ğŸ½ğŸ™‰ğŸ™ŠğŸ’ğŸ£ğŸ¥ğŸ¦‘ğŸ¦ğŸ¡ğŸŸğŸ‹ğŸ¦ˆğŸ…ğŸ†ğŸ¦ğŸ˜ğŸ¦ğŸªğŸ«ğŸƒğŸğŸ–ğŸğŸ‘ğŸğŸ¦ŒğŸ•ğŸ©ğŸˆğŸ¦ƒğŸ‡ğŸğŸ€ğŸ‰ğŸ‘¹ğŸ‘ºğŸ¤¡ğŸ‘»ğŸ‘½ğŸ‘¾ğŸ¤–ğŸƒğŸ˜ºğŸ‘®ğŸ‘·ğŸ¤¶ğŸ…ğŸŒğŸŒ')
        const scoreboard = avatars.map((a, index) => {
            return {
                avatar: a,
                name: `player${index}`,
                oldScore: index + 1,
                score: index + 1,
                oldRank: index + 1,
                rank: avatars.length - index
            }
        })

        // const scoreboard = [
        //     { avatar: 'ğŸ»', name: 'alice', oldScore: 20000, score: 20000, oldRank: 1, rank: 2 },
        //     { avatar: 'ğŸ¦Š', name: 'bob', oldScore: 600, score: 20001, oldRank: 2, rank: 9 },
        //     { avatar: 'ğŸ°', name: 'cindy', oldScore: 500, score: 600, oldRank: 3, rank: 5 },
        //     { avatar: 'ğŸ¹', name: 'dave', oldScore: 400, score: 500, oldRank: 4, rank: 8 },
        //     { avatar: 'ğŸ­', name: 'elise', oldScore: 300, score: 400, oldRank: 5, rank: 3 },
        //     { avatar: 'ğŸª²', name: 'frank', oldScore: 400, score: 500, oldRank: 6, rank: 6 },
        //     { avatar: 'ğŸ¦…', name: 'gina', oldScore: 300, score: 400, oldRank: 7, rank: 4 },
        //     { avatar: 'ğŸ›', name: 'helmut', oldScore: 400, score: 500, oldRank: 8, rank: 7 },
        //     { avatar: 'ğŸ‘½', name: 'ida', oldScore: 300, score: 400, oldRank: 9, rank: 1 }
        // ]

        // const scoreboard = [
        //     { avatar: 'ğŸ»', name: 'alice', oldScore: 20000, score: 20000, oldRank: 1, rank: 3 },
        //     { avatar: 'ğŸ¦Š', name: 'bob', oldScore: 600, score: 20001, oldRank: 2, rank: 1 },
        //     { avatar: 'ğŸ°', name: 'cindy', oldScore: 500, score: 600, oldRank: 3, rank: 2 },
        // ]

        // const scoreboard = [
        //     { avatar: 'ğŸ»', name: 'alice', oldScore: 20000, score: 20000, oldRank: 1, rank: 2 },
        //     { avatar: 'ğŸ¦Š', name: 'bob', oldScore: 600, score: 20001, oldRank: 2, rank: 1 }
        // ]

        const Page = function() {
            const [volume, setVolume] = useState(1)

            const isFinal = false
            const isIos = navigator.userAgent.match(/ipad|iphone/i)
            const audioControl = isIos ? '' : html`<${AudioControl} onVolume=${setVolume} />`

            return html`<${Shell} headerLeft='test quiz' headerRight=${audioControl} footerLeft='5 Players' footerRight='-' fullScreenContent=${true}>
                <${Transition} volume=${volume} isFinal=${isFinal} distribution=${distribution} scoreboard=${scoreboard} onNextRound=${() => alert('next round')} onBackHome=${() => alert('back home')} onStopMusic=${() => console.log('stopping music')} />
            <//>`
        }
        render(html`<${Page} />`, document.body)
    </script>
</body>

</html>
